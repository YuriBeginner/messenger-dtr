<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page_title or "OJT Management Portal" }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  :root{
    --bg: #f6f6f7;
    --card: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --line: #e5e7eb;
    --shadow: 0 1px 2px rgba(0,0,0,.05), 0 10px 24px rgba(0,0,0,.06);
  
    --gap: 16px;
    --gap-lg: 22px;
  }
  

    /* ✅ Org branding (falls back safely) */
    --brand-primary: {{ organization.primary_color if organization and organization.primary_color else '#111827' }};
    --brand-secondary: {{ organization.secondary_color if organization and organization.secondary_color else '#3b82f6' }};
  }


    body { background: var(--bg); color: var(--text); }

    /* Overall sizing: slightly smaller, more premium */
    body, .form-control, .btn, .table { font-size: 0.92rem; }

    .app-shell { min-height: 100vh; }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: #fff;
      border-right: 1px solid var(--line);
      position: sticky;
      top: 0;
      height: 100vh;
      padding: 18px 14px;
    }
    .brand {
      font-weight: 700;
      letter-spacing: .2px;
      font-size: 0.98rem;
      margin-bottom: 22px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--line);
    }

    .brand small {
      display:block;
      color: var(--muted);
      font-weight: 500;
      margin-top: 2px;
      font-size: 0.85rem;
    }
    .nav-pill {
      display:flex;
      align-items:center;
      gap:10px;
      padding: 9px 12px;
      border-radius: 10px;
      color: #111827;
      text-decoration:none;
      border: 1px solid transparent;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .nav-pill:hover { background:#f3f4f6; border-color:#eef0f3; }
    .nav-pill.active { background: var(--brand-primary); color:#fff; }
    .nav-section { margin-top: 10px; }

    /* Content */
    .content { padding: 28px; }
    .topbar {
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .page-title { font-size: 1.15rem; font-weight: 750; margin: 0; }
    .subtle { color: var(--muted); font-size: .88rem; }

    /* Cards */
    .card-soft {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: var(--shadow);
    }
    .metric { display:flex; flex-direction: column; gap: 2px; }
    .metric .label { color: var(--muted); font-size: .88rem; }
    .metric .value { font-size: 1.65rem; font-weight: 800; letter-spacing: -.3px; }
    .hover-lift { transition: transform .12s ease, box-shadow .12s ease; }
    .hover-lift:hover { transform: translateY(-1px); box-shadow: 0 2px 3px rgba(0,0,0,.05), 0 14px 28px rgba(0,0,0,.08); }

    /* Badges: smaller + softer (premium grayscale system) */
    .badge-soft {
      border-radius: 999px;
      padding: 4px 8px;
      font-weight: 600;
      font-size: 0.75rem;
      line-height: 1;
      display: inline-flex;@
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }
    .b-gray  { background:#f3f4f6; color:#374151; border:1px solid #e5e7eb; }
    .b-green { background:#eaf7f1; color:#065f46; border:1px solid #d1fae5; }
    .b-yellow{ background:#fefce8; color:#854d0e; border:1px solid #fde68a; }
    .b-red   { background:#fef2f2; color:#7f1d1d; border:1px solid #fecaca; }

    /* Tables: tighter spacing + calmer header */
    .table thead th {
      color: var(--muted);
      font-weight: 600;
      font-size: 0.80rem;
      border-bottom: 1px solid var(--line);
    }
    .table tbody td { vertical-align: middle; }
    .table a { text-decoration: none; }

    .table-sm td, .table-sm th {
      padding: 0.45rem 0.60rem; /* tighter rows */
      font-size: 0.88rem;
    }

    /* Inputs */
    .form-control {
      border-radius: 12px;
      border-color: var(--line);
      padding: 0.55rem 0.75rem;
    }
    .btn {
      border-radius: 12px;
      padding: 0.55rem 0.85rem;
      font-weight: 650;
    }
    .btn-primary {
    background: var(--brand-secondary);
    border-color: var(--brand-secondary);
  }
  .btn-primary:hover {
    filter: brightness(0.95);
  }

    /* Mobile */
    @media (max-width: 992px) {
      .sidebar { position: static; height: auto; width: 100%; border-right: none; border-bottom: 1px solid var(--line); }
      .content { padding: 16px; }
      .page-title { font-size: 1.05rem; }
    }
    .stack { display: grid; gap: var(--gap-lg); }
    .stack-sm { display: grid; gap: var(--gap); }
    
    .section {
      margin-top: var(--gap-lg);
    }
    
    .card-soft {
      padding: 18px;            /* ✅ add default padding */
    }
    
    .card-soft + .card-soft {
      margin-top: var(--gap);   /* ✅ natural spacing if stacked */
    }

  </style>
</head>

<body>
<div class="app-shell d-lg-flex">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand text-center">
      {% if organization and organization.logo_url %}
        <img src="{{ organization.logo_url }}" 
             style="max-height:95px; max-width:100%; object-fit:contain;"
             class="mb-2">

      {% endif %}
    
      <div>{{ organization.name if organization else "OJT Management Portal" }}</div>
      <small>Attendance &amp; Compliance</small>
    </div>

    <nav class="nav-section d-grid gap-2">
      <a class="nav-pill {{ 'active' if active_page=='dashboard' else '' }}" href="/admin/dashboard">Dashboard</a>
      <a class="nav-pill {{ 'active' if active_page=='students' else '' }}" href="/admin/students">Students</a>
      <a class="nav-pill {{ 'active' if active_page=='exports' else '' }}" href="/admin/exports">Exports</a>
      <a class="nav-pill {{ 'active' if active_page=='logs' else '' }}" href="/admin/logs">Logs</a>
      <a class="nav-pill {{ 'active' if active_page=='organization' else '' }}" href="/admin/organization">Organization</a>
    </nav>

    <div class="mt-4 pt-3 border-top" style="border-color: var(--line) !important;">
      <div class="subtle mb-2">Signed in as</div>
      <div class="fw-semibold">{{ admin_name }}</div>
      <a class="btn btn-sm btn-outline-dark mt-3 w-100" href="/admin/logout">Logout</a>
    </div>
  </aside>

  <!-- Main content -->
  <main class="flex-grow-1 content">
    <div class="topbar">
      <div>
        <h1 class="page-title">{{ page_title or "Dashboard" }}</h1>
        {% if subtitle %}
          <div class="subtle">{{ subtitle }}</div>
        {% endif %}
      </div>
      {% if last_updated %}
        <div class="subtle text-end">
          Last updated<br>
          <span class="fw-semibold">{{ last_updated }}</span>
        </div>
      {% endif %}
    </div>

    {% block content %}{% endblock %}
  </main>
</div>
</body>
</html>
